<!DOCTYPE html>
<html>
<!-- based on a Pen by Devilish Alchemist @ http://codepen.io/devilishalchemist/pen/LERvpM -->
<head>
  <meta charset="UTF-8">
  <title>4.1. Produire les éclairages virtuels</title>

  <link rel="stylesheet" href="../../_resources/css/normalize.min.css">
  <link rel="stylesheet" href="../../_resources/css/whhg.css">
  <link rel="stylesheet" href="../../_resources/css/fonts.css">
  <link rel="stylesheet" href="../../_resources/css/style.css">

</head>

<body>
  <div class="page">

    <span id="view-toc" class="tooltip">&laquo; view index</span>
    <span id="view-content" class="tooltip">return to content &raquo;</span>
    <span id="view-next" class="tooltip">next page &raquo;</span>
    <span id="view-prev" class="tooltip">&laquo; previous page</span>

    <span class="menu_toggle">
      <i class="menu_open icon icon-th-list"></i>
      <i class="menu_close icon icon-import"></i>
    </span>

    <div id="navigation">
      <ul>
<li><a href="../../Home.html" title="Home" class="page">Home</a>
<ul>
<li><a href="../1._Acquisition.html" title="1. Acquisition" class="page">1. Acquisition</a></li>
<li><a href="../2._Créer_les_modèles_3D.html" title="2. Créer les modèles 3D" class="page">2. Créer les modèles 3D</a></li>
<li><a href="../3._PETrA.html" title="3. PETrA" class="page">3. PETrA</a></li>
<li><a href="../4._ICEO.html" title="4. ICEO" class="page">4. ICEO</a>
<ul>
<li><b>1. Produire les eclairages virtuels</b></li>
<li><a href="./2._Extraire_les_informations.html" title="2. Extraire les informations" class="page">2. Extraire les informations</a></li>
</ul>
</li>
<li><a href="../5._Mettre_en_page_la_description_géométrale.html" title="5. Mettre en page la description géométrale" class="page">5. Mettre en page la description géométrale</a></li>
<li><a href="../6._Logiciels.html" title="6. Logiciels" class="page">6. Logiciels</a></li>
<li><a href="../7._Gestion_de_la_documentation.html" title="7. Gestion de la documentation" class="page">7. Gestion de la documentation</a></li>
</ul></li>
</ul>

      <span class="zimversion">
        <small>built with</small><br><strong>Zim 0.74.2</strong>
        <br>
        --
        <br>
        <a href="https://github.com/scar45/ResponsivePivot">template<br> on Github<br><i class="icon icon-github"></i></a>
      </span>
    </div>

    <main class="content">
      <div class="content_inner">
        <article>
          <header>
            <a id="navPrev" href='../4._ICEO.html'><span><i class="icon icon-chevron-left"></i></span></a>

            <a id="navHome" href='../../Home.html'><span><i class="icon icon-homealt"></i></span></a>

            <a id="navNext" href='./2._Extraire_les_informations.html'><span><i class="icon icon-chevron-right"></i></span></a>
          </header>

          <section>
            <div class="page-title">
              <h1><i class="icon icon-bookmarkalt"></i> 4.1. Produire les éclairages virtuels <a name='Home:4. ICEO:1. Produire les eclairages virtuels'></a></h1>
            </div>
            <div class="fade fade-top"></div>
            <div class="page-body">
              <p>
Créée le mardi 23 mars 2021
</p>

<h2>Matériaux nécessaires<a id="matériaux-nécessaires" class="h_anchor"></a></h2>

<p>
Parmi toutes les images produites à l'issue de l'étape PETRA, nous aurons besoin de trois images :<br>
<ul>
<li>Cam-##_R1_NMC.png</li>
<li>Cam-##_R3_EC2-#mm.png</li>
<li>Cam-##_zH_Masques.png</li>
</ul>
</p>

<p>
Ces images seront utilisées dans le fichier gabarit "####_template-ICEO.blend".<br>
Le paramétrage du fichier est réalisé en quelques étapes.
</p>

<h2>Créer le plan<a id="créer-le-plan" class="h_anchor"></a></h2>

<p>
Grâce à l'extension "import images as planes", nous allons pouvoir créer un plan exactement aux proportions de l'image que nous voulons rééclairer virtuellement. Il est possible de choisir n'importe quelle image générée pendant l'étape PETRA ; la seule condition étant qu'elle soit issue de la même caméra.
</p>

<p>
Il est possible de paramétrer la manière dont le plan sera créé. Ce sont normalement les options par défaut, mais les paramètres sont rappelés dans l'image suivante :<br>
<a href="./ImageAsPlane.png"><img src="./ImageAsPlane.png" height="430"></a>
</p>

<p>
Le plan est créé avec un matériau comprenant l'image que nous avons choisie. Il suffit d'appliquer simplement le matériau prédéfini "ICEO".<br>
<a href="./importImageAsPlane-HD.gif"><img src="./importImageAsPlane.gif"></a>
</p>

<h2>Configurer le matériau "ICEO"<a id="configurer-le-matériau-iceo" class="h_anchor"></a></h2>

<p>
Ce matériau prédéfini doit maintenant être alimenter par les trois images citées au début de cette page :<br>
<ul>
<li>Cam-##_R1_NMC.png</li>
<li>Cam-##_R3_EC2-#mm.png</li>
<li>Cam-##_zH_Masques.png</li>
</ul>
</p>

<p>
Un simple glisser-déposer permet de les importer dans Blender. Il suffit ensuite de les connecter aux trois puces en attentes.<br>
Les images sont interprétées par défaut comme des images sRGB. Pour un résultat optimal, il faudra spécifier que l'espace de couleur des images "Cam-##_R1_NMC.png" et "Cam-##_R3_EC2-#mm.png" est "Non-Color".  La question ne se pose pas pour "Cam-##_zH_Masques.png".<br>
<a href="./materiau-HD.gif"><img src="./materiau.gif"></a>
</p>

<p>
En choisissant l'affichage "rendu" dans l'espace de travail, nous pouvons désormais visualiser la surface rééclairée virtuellement.<br>
Il est possible de basculer entre un éclairage du volume (avec "R1_NMC_EV") et un éclairage "aplati" (avec "R3_EC2_EV").<br>
Pour modifier l'azimuth de la lumière, il suffit de jouer avec le curseur de la timeline ; pour modifier l'inclinaison, modifier la rotation en X du manipulateur "Inclinaison".<br>
<a href="./visualisationEV-HD.gif"><img src="./visualisationEV.gif"></a>
</p>

<h2>Configurer le rendu (1/2)<a id="configurer-le-rendu-12" class="h_anchor"></a></h2>

<p>
Quelques éléments sont à paramétrer : les dimensions des images qui vont être calculées, le pas de la lumière en azimuth et l'inclinaison de la lumière.
</p>

<p>
<b>Principe du rendu des images</b><br>
Le principe consiste à rendre une animation s'étalant de 0 à 359 (1 image = 1° en azimuth) ; il faudra calculer une nouvelle animation pour chaque changement d'inclinaison de la lumière.
</p>

<p>
<b>Définir les dimensions des images qui vont être rendues</b><br>
Les dimensions des images peut être facilement obtenue en sélectionnant une des trois images insérées dans le matériau "ICEO" (panneau latéral droit / <i>properties</i>).<br>
Ces valeurs doivent être recopiées dans le panneau des propriétés, onglet <i>output properties</i>.
</p>

<p>
<b>Définir le pas de la lumière en azimuth</b><br>
Dans ce même onglet <i>output properties</i>, nous pouvons définir le pas en azimuth entre chaque rotation de la source lumieuse.
</p>

<p>
Par défaut, nous recommandons :<br>
<ul>
<li>R1_NMC_EV : step = 15</li>
<li>R3_EC2_EV : step = 10</li>
</ul>
</p>

<p>
<b>Définir l'inclinaison de la lumière</b><br>
<i>La manipulation a été réalisée dans la capture vidéo précédente</i><br>
<ol type="1" start="1">
<li>Sélectionner le manipulateur "Inclinaison"</li>
<li>Dans le panneau latéral droit de l'espace 3D, modifier la rotation en X. Il est possible de </li>
</ol>
</p>

<p>
Par défaut, nous recommandons :<br>
<ul>
<li>R1_NMC_EV : inclinaison = 0° ; 5° ; 10° ; 15° et 20°</li>
<li>R3_EC2_EV : inclinaison = 10°</li>
</ul>
</p>

<p>
<a href="./config1-HD.gif"><img src="./config1.gif"></a>
</p>

<h2>Configurer le rendu (2/2)<a id="configurer-le-rendu-22" class="h_anchor"></a></h2>

<p>
Dans l'onglet compositing :<br>
<ul>
<li>Connecter correctement la puce avec la boîte terminale en fonction de la couche d'information sélectionnée dans le matériau</li>
</ul>
</p>

<p>
Les images sont rendues dans le même dossier temp que les images produites au cours de l'application de PETRA
</p>

<h2>Suite des opérations<a id="suite-des-opérations" class="h_anchor"></a></h2>

<p>
La <a href="../3._PETRA/3._Mettre_en_page_la_description_géométrale.html" title="mise en page de la description géométrale" class="file">mise en page de la description géométrale</a> peut être poursuivie.
</p>

            </div>
            <div class="fade fade-bottom"></div>
          </section>

          <footer>
              <a href="#" class="scrollToTop" title="Back to top"><i class="icon icon-uploadalt"></i></a>
          </footer>
        </article>
      </div>
    </main>
  </div>

  <script src="../../_resources/js/jquery.v2.1.3.min.js"></script>
  <script src="../../_resources/js/index.js"></script>

</body>
</html>
